{"ast":null,"code":"'use strict';var Buffer=require('buffer').Buffer;var Transform=require('stream').Transform;var binding=require(\"./binding\");var util=require('util');var assert=require('assert').ok;var kMaxLength=require('buffer').kMaxLength;var kRangeErrorMessage='Cannot create final Buffer. It would be larger '+'than 0x'+kMaxLength.toString(16)+' bytes';binding.Z_MIN_WINDOWBITS=8;binding.Z_MAX_WINDOWBITS=15;binding.Z_DEFAULT_WINDOWBITS=15;binding.Z_MIN_CHUNK=64;binding.Z_MAX_CHUNK=Infinity;binding.Z_DEFAULT_CHUNK=16*1024;binding.Z_MIN_MEMLEVEL=1;binding.Z_MAX_MEMLEVEL=9;binding.Z_DEFAULT_MEMLEVEL=8;binding.Z_MIN_LEVEL=-1;binding.Z_MAX_LEVEL=9;binding.Z_DEFAULT_LEVEL=binding.Z_DEFAULT_COMPRESSION;var bkeys=Object.keys(binding);for(var bk=0;bk<bkeys.length;bk++){var bkey=bkeys[bk];if(bkey.match(/^Z/)){Object.defineProperty(exports,bkey,{enumerable:true,value:binding[bkey],writable:false});}}var codes={Z_OK:binding.Z_OK,Z_STREAM_END:binding.Z_STREAM_END,Z_NEED_DICT:binding.Z_NEED_DICT,Z_ERRNO:binding.Z_ERRNO,Z_STREAM_ERROR:binding.Z_STREAM_ERROR,Z_DATA_ERROR:binding.Z_DATA_ERROR,Z_MEM_ERROR:binding.Z_MEM_ERROR,Z_BUF_ERROR:binding.Z_BUF_ERROR,Z_VERSION_ERROR:binding.Z_VERSION_ERROR};var ckeys=Object.keys(codes);for(var ck=0;ck<ckeys.length;ck++){var ckey=ckeys[ck];codes[codes[ckey]]=ckey;}Object.defineProperty(exports,'codes',{enumerable:true,value:Object.freeze(codes),writable:false});exports.Deflate=Deflate;exports.Inflate=Inflate;exports.Gzip=Gzip;exports.Gunzip=Gunzip;exports.DeflateRaw=DeflateRaw;exports.InflateRaw=InflateRaw;exports.Unzip=Unzip;exports.createDeflate=function(o){return new Deflate(o);};exports.createInflate=function(o){return new Inflate(o);};exports.createDeflateRaw=function(o){return new DeflateRaw(o);};exports.createInflateRaw=function(o){return new InflateRaw(o);};exports.createGzip=function(o){return new Gzip(o);};exports.createGunzip=function(o){return new Gunzip(o);};exports.createUnzip=function(o){return new Unzip(o);};exports.deflate=function(buffer,opts,callback){if(typeof opts==='function'){callback=opts;opts={};}return zlibBuffer(new Deflate(opts),buffer,callback);};exports.deflateSync=function(buffer,opts){return zlibBufferSync(new Deflate(opts),buffer);};exports.gzip=function(buffer,opts,callback){if(typeof opts==='function'){callback=opts;opts={};}return zlibBuffer(new Gzip(opts),buffer,callback);};exports.gzipSync=function(buffer,opts){return zlibBufferSync(new Gzip(opts),buffer);};exports.deflateRaw=function(buffer,opts,callback){if(typeof opts==='function'){callback=opts;opts={};}return zlibBuffer(new DeflateRaw(opts),buffer,callback);};exports.deflateRawSync=function(buffer,opts){return zlibBufferSync(new DeflateRaw(opts),buffer);};exports.unzip=function(buffer,opts,callback){if(typeof opts==='function'){callback=opts;opts={};}return zlibBuffer(new Unzip(opts),buffer,callback);};exports.unzipSync=function(buffer,opts){return zlibBufferSync(new Unzip(opts),buffer);};exports.inflate=function(buffer,opts,callback){if(typeof opts==='function'){callback=opts;opts={};}return zlibBuffer(new Inflate(opts),buffer,callback);};exports.inflateSync=function(buffer,opts){return zlibBufferSync(new Inflate(opts),buffer);};exports.gunzip=function(buffer,opts,callback){if(typeof opts==='function'){callback=opts;opts={};}return zlibBuffer(new Gunzip(opts),buffer,callback);};exports.gunzipSync=function(buffer,opts){return zlibBufferSync(new Gunzip(opts),buffer);};exports.inflateRaw=function(buffer,opts,callback){if(typeof opts==='function'){callback=opts;opts={};}return zlibBuffer(new InflateRaw(opts),buffer,callback);};exports.inflateRawSync=function(buffer,opts){return zlibBufferSync(new InflateRaw(opts),buffer);};function zlibBuffer(engine,buffer,callback){var buffers=[];var nread=0;engine.on('error',onError);engine.on('end',onEnd);engine.end(buffer);flow();function flow(){var chunk;while(null!==(chunk=engine.read())){buffers.push(chunk);nread+=chunk.length;}engine.once('readable',flow);}function onError(err){engine.removeListener('end',onEnd);engine.removeListener('readable',flow);callback(err);}function onEnd(){var buf;var err=null;if(nread>=kMaxLength){err=new RangeError(kRangeErrorMessage);}else{buf=Buffer.concat(buffers,nread);}buffers=[];engine.close();callback(err,buf);}}function zlibBufferSync(engine,buffer){if(typeof buffer==='string')buffer=Buffer.from(buffer);if(!Buffer.isBuffer(buffer))throw new TypeError('Not a string or buffer');var flushFlag=engine._finishFlushFlag;return engine._processChunk(buffer,flushFlag);}function Deflate(opts){if(!(this instanceof Deflate))return new Deflate(opts);Zlib.call(this,opts,binding.DEFLATE);}function Inflate(opts){if(!(this instanceof Inflate))return new Inflate(opts);Zlib.call(this,opts,binding.INFLATE);}function Gzip(opts){if(!(this instanceof Gzip))return new Gzip(opts);Zlib.call(this,opts,binding.GZIP);}function Gunzip(opts){if(!(this instanceof Gunzip))return new Gunzip(opts);Zlib.call(this,opts,binding.GUNZIP);}function DeflateRaw(opts){if(!(this instanceof DeflateRaw))return new DeflateRaw(opts);Zlib.call(this,opts,binding.DEFLATERAW);}function InflateRaw(opts){if(!(this instanceof InflateRaw))return new InflateRaw(opts);Zlib.call(this,opts,binding.INFLATERAW);}function Unzip(opts){if(!(this instanceof Unzip))return new Unzip(opts);Zlib.call(this,opts,binding.UNZIP);}function isValidFlushFlag(flag){return flag===binding.Z_NO_FLUSH||flag===binding.Z_PARTIAL_FLUSH||flag===binding.Z_SYNC_FLUSH||flag===binding.Z_FULL_FLUSH||flag===binding.Z_FINISH||flag===binding.Z_BLOCK;}function Zlib(opts,mode){var _this=this;this._opts=opts=opts||{};this._chunkSize=opts.chunkSize||exports.Z_DEFAULT_CHUNK;Transform.call(this,opts);if(opts.flush&&!isValidFlushFlag(opts.flush)){throw new Error('Invalid flush flag: '+opts.flush);}if(opts.finishFlush&&!isValidFlushFlag(opts.finishFlush)){throw new Error('Invalid flush flag: '+opts.finishFlush);}this._flushFlag=opts.flush||binding.Z_NO_FLUSH;this._finishFlushFlag=typeof opts.finishFlush!=='undefined'?opts.finishFlush:binding.Z_FINISH;if(opts.chunkSize){if(opts.chunkSize<exports.Z_MIN_CHUNK||opts.chunkSize>exports.Z_MAX_CHUNK){throw new Error('Invalid chunk size: '+opts.chunkSize);}}if(opts.windowBits){if(opts.windowBits<exports.Z_MIN_WINDOWBITS||opts.windowBits>exports.Z_MAX_WINDOWBITS){throw new Error('Invalid windowBits: '+opts.windowBits);}}if(opts.level){if(opts.level<exports.Z_MIN_LEVEL||opts.level>exports.Z_MAX_LEVEL){throw new Error('Invalid compression level: '+opts.level);}}if(opts.memLevel){if(opts.memLevel<exports.Z_MIN_MEMLEVEL||opts.memLevel>exports.Z_MAX_MEMLEVEL){throw new Error('Invalid memLevel: '+opts.memLevel);}}if(opts.strategy){if(opts.strategy!=exports.Z_FILTERED&&opts.strategy!=exports.Z_HUFFMAN_ONLY&&opts.strategy!=exports.Z_RLE&&opts.strategy!=exports.Z_FIXED&&opts.strategy!=exports.Z_DEFAULT_STRATEGY){throw new Error('Invalid strategy: '+opts.strategy);}}if(opts.dictionary){if(!Buffer.isBuffer(opts.dictionary)){throw new Error('Invalid dictionary: it should be a Buffer instance');}}this._handle=new binding.Zlib(mode);var self=this;this._hadError=false;this._handle.onerror=function(message,errno){_close(self);self._hadError=true;var error=new Error(message);error.errno=errno;error.code=exports.codes[errno];self.emit('error',error);};var level=exports.Z_DEFAULT_COMPRESSION;if(typeof opts.level==='number')level=opts.level;var strategy=exports.Z_DEFAULT_STRATEGY;if(typeof opts.strategy==='number')strategy=opts.strategy;this._handle.init(opts.windowBits||exports.Z_DEFAULT_WINDOWBITS,level,opts.memLevel||exports.Z_DEFAULT_MEMLEVEL,strategy,opts.dictionary);this._buffer=Buffer.allocUnsafe(this._chunkSize);this._offset=0;this._level=level;this._strategy=strategy;this.once('end',this.close);Object.defineProperty(this,'_closed',{get:function get(){return!_this._handle;},configurable:true,enumerable:true});}util.inherits(Zlib,Transform);Zlib.prototype.params=function(level,strategy,callback){if(level<exports.Z_MIN_LEVEL||level>exports.Z_MAX_LEVEL){throw new RangeError('Invalid compression level: '+level);}if(strategy!=exports.Z_FILTERED&&strategy!=exports.Z_HUFFMAN_ONLY&&strategy!=exports.Z_RLE&&strategy!=exports.Z_FIXED&&strategy!=exports.Z_DEFAULT_STRATEGY){throw new TypeError('Invalid strategy: '+strategy);}if(this._level!==level||this._strategy!==strategy){var self=this;this.flush(binding.Z_SYNC_FLUSH,function(){assert(self._handle,'zlib binding closed');self._handle.params(level,strategy);if(!self._hadError){self._level=level;self._strategy=strategy;if(callback)callback();}});}else{process.nextTick(callback);}};Zlib.prototype.reset=function(){assert(this._handle,'zlib binding closed');return this._handle.reset();};Zlib.prototype._flush=function(callback){this._transform(Buffer.alloc(0),'',callback);};Zlib.prototype.flush=function(kind,callback){var _this2=this;var ws=this._writableState;if(typeof kind==='function'||kind===undefined&&!callback){callback=kind;kind=binding.Z_FULL_FLUSH;}if(ws.ended){if(callback)process.nextTick(callback);}else if(ws.ending){if(callback)this.once('end',callback);}else if(ws.needDrain){if(callback){this.once('drain',function(){return _this2.flush(kind,callback);});}}else{this._flushFlag=kind;this.write(Buffer.alloc(0),'',callback);}};Zlib.prototype.close=function(callback){_close(this,callback);process.nextTick(emitCloseNT,this);};function _close(engine,callback){if(callback)process.nextTick(callback);if(!engine._handle)return;engine._handle.close();engine._handle=null;}function emitCloseNT(self){self.emit('close');}Zlib.prototype._transform=function(chunk,encoding,cb){var flushFlag;var ws=this._writableState;var ending=ws.ending||ws.ended;var last=ending&&(!chunk||ws.length===chunk.length);if(chunk!==null&&!Buffer.isBuffer(chunk))return cb(new Error('invalid input'));if(!this._handle)return cb(new Error('zlib binding closed'));if(last)flushFlag=this._finishFlushFlag;else{flushFlag=this._flushFlag;if(chunk.length>=ws.length){this._flushFlag=this._opts.flush||binding.Z_NO_FLUSH;}}this._processChunk(chunk,flushFlag,cb);};Zlib.prototype._processChunk=function(chunk,flushFlag,cb){var availInBefore=chunk&&chunk.length;var availOutBefore=this._chunkSize-this._offset;var inOff=0;var self=this;var async=typeof cb==='function';if(!async){var buffers=[];var nread=0;var error;this.on('error',function(er){error=er;});assert(this._handle,'zlib binding closed');do{var res=this._handle.writeSync(flushFlag,chunk,inOff,availInBefore,this._buffer,this._offset,availOutBefore);}while(!this._hadError&&callback(res[0],res[1]));if(this._hadError){throw error;}if(nread>=kMaxLength){_close(this);throw new RangeError(kRangeErrorMessage);}var buf=Buffer.concat(buffers,nread);_close(this);return buf;}assert(this._handle,'zlib binding closed');var req=this._handle.write(flushFlag,chunk,inOff,availInBefore,this._buffer,this._offset,availOutBefore);req.buffer=chunk;req.callback=callback;function callback(availInAfter,availOutAfter){if(this){this.buffer=null;this.callback=null;}if(self._hadError)return;var have=availOutBefore-availOutAfter;assert(have>=0,'have should not go down');if(have>0){var out=self._buffer.slice(self._offset,self._offset+have);self._offset+=have;if(async){self.push(out);}else{buffers.push(out);nread+=out.length;}}if(availOutAfter===0||self._offset>=self._chunkSize){availOutBefore=self._chunkSize;self._offset=0;self._buffer=Buffer.allocUnsafe(self._chunkSize);}if(availOutAfter===0){inOff+=availInBefore-availInAfter;availInBefore=availInAfter;if(!async)return true;var newReq=self._handle.write(flushFlag,chunk,inOff,availInBefore,self._buffer,self._offset,self._chunkSize);newReq.callback=callback;newReq.buffer=chunk;return;}if(!async)return false;cb();}};util.inherits(Deflate,Zlib);util.inherits(Inflate,Zlib);util.inherits(Gzip,Zlib);util.inherits(Gunzip,Zlib);util.inherits(DeflateRaw,Zlib);util.inherits(InflateRaw,Zlib);util.inherits(Unzip,Zlib);","map":{"version":3,"sources":["/usr/local/lib/node_modules/expo-cli/node_modules/browserify-zlib/lib/index.js"],"names":["Buffer","require","Transform","binding","util","assert","ok","kMaxLength","kRangeErrorMessage","toString","Z_MIN_WINDOWBITS","Z_MAX_WINDOWBITS","Z_DEFAULT_WINDOWBITS","Z_MIN_CHUNK","Z_MAX_CHUNK","Infinity","Z_DEFAULT_CHUNK","Z_MIN_MEMLEVEL","Z_MAX_MEMLEVEL","Z_DEFAULT_MEMLEVEL","Z_MIN_LEVEL","Z_MAX_LEVEL","Z_DEFAULT_LEVEL","Z_DEFAULT_COMPRESSION","bkeys","Object","keys","bk","length","bkey","match","defineProperty","exports","enumerable","value","writable","codes","Z_OK","Z_STREAM_END","Z_NEED_DICT","Z_ERRNO","Z_STREAM_ERROR","Z_DATA_ERROR","Z_MEM_ERROR","Z_BUF_ERROR","Z_VERSION_ERROR","ckeys","ck","ckey","freeze","Deflate","Inflate","Gzip","Gunzip","DeflateRaw","InflateRaw","Unzip","createDeflate","o","createInflate","createDeflateRaw","createInflateRaw","createGzip","createGunzip","createUnzip","deflate","buffer","opts","callback","zlibBuffer","deflateSync","zlibBufferSync","gzip","gzipSync","deflateRaw","deflateRawSync","unzip","unzipSync","inflate","inflateSync","gunzip","gunzipSync","inflateRaw","inflateRawSync","engine","buffers","nread","on","onError","onEnd","end","flow","chunk","read","push","once","err","removeListener","buf","RangeError","concat","close","from","isBuffer","TypeError","flushFlag","_finishFlushFlag","_processChunk","Zlib","call","DEFLATE","INFLATE","GZIP","GUNZIP","DEFLATERAW","INFLATERAW","UNZIP","isValidFlushFlag","flag","Z_NO_FLUSH","Z_PARTIAL_FLUSH","Z_SYNC_FLUSH","Z_FULL_FLUSH","Z_FINISH","Z_BLOCK","mode","_this","_opts","_chunkSize","chunkSize","flush","Error","finishFlush","_flushFlag","windowBits","level","memLevel","strategy","Z_FILTERED","Z_HUFFMAN_ONLY","Z_RLE","Z_FIXED","Z_DEFAULT_STRATEGY","dictionary","_handle","self","_hadError","onerror","message","errno","_close","error","code","emit","init","_buffer","allocUnsafe","_offset","_level","_strategy","get","configurable","inherits","prototype","params","process","nextTick","reset","_flush","_transform","alloc","kind","_this2","ws","_writableState","undefined","ended","ending","needDrain","write","emitCloseNT","encoding","cb","last","availInBefore","availOutBefore","inOff","async","er","res","writeSync","req","availInAfter","availOutAfter","have","out","slice","newReq"],"mappings":"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","sourcesContent":["'use strict';\n\nvar Buffer = require('buffer').Buffer;\nvar Transform = require('stream').Transform;\nvar binding = require('./binding');\nvar util = require('util');\nvar assert = require('assert').ok;\nvar kMaxLength = require('buffer').kMaxLength;\nvar kRangeErrorMessage = 'Cannot create final Buffer. It would be larger ' + 'than 0x' + kMaxLength.toString(16) + ' bytes';\n\n// zlib doesn't provide these, so kludge them in following the same\n// const naming scheme zlib uses.\nbinding.Z_MIN_WINDOWBITS = 8;\nbinding.Z_MAX_WINDOWBITS = 15;\nbinding.Z_DEFAULT_WINDOWBITS = 15;\n\n// fewer than 64 bytes per chunk is stupid.\n// technically it could work with as few as 8, but even 64 bytes\n// is absurdly low.  Usually a MB or more is best.\nbinding.Z_MIN_CHUNK = 64;\nbinding.Z_MAX_CHUNK = Infinity;\nbinding.Z_DEFAULT_CHUNK = 16 * 1024;\n\nbinding.Z_MIN_MEMLEVEL = 1;\nbinding.Z_MAX_MEMLEVEL = 9;\nbinding.Z_DEFAULT_MEMLEVEL = 8;\n\nbinding.Z_MIN_LEVEL = -1;\nbinding.Z_MAX_LEVEL = 9;\nbinding.Z_DEFAULT_LEVEL = binding.Z_DEFAULT_COMPRESSION;\n\n// expose all the zlib constants\nvar bkeys = Object.keys(binding);\nfor (var bk = 0; bk < bkeys.length; bk++) {\n  var bkey = bkeys[bk];\n  if (bkey.match(/^Z/)) {\n    Object.defineProperty(exports, bkey, {\n      enumerable: true, value: binding[bkey], writable: false\n    });\n  }\n}\n\n// translation table for return codes.\nvar codes = {\n  Z_OK: binding.Z_OK,\n  Z_STREAM_END: binding.Z_STREAM_END,\n  Z_NEED_DICT: binding.Z_NEED_DICT,\n  Z_ERRNO: binding.Z_ERRNO,\n  Z_STREAM_ERROR: binding.Z_STREAM_ERROR,\n  Z_DATA_ERROR: binding.Z_DATA_ERROR,\n  Z_MEM_ERROR: binding.Z_MEM_ERROR,\n  Z_BUF_ERROR: binding.Z_BUF_ERROR,\n  Z_VERSION_ERROR: binding.Z_VERSION_ERROR\n};\n\nvar ckeys = Object.keys(codes);\nfor (var ck = 0; ck < ckeys.length; ck++) {\n  var ckey = ckeys[ck];\n  codes[codes[ckey]] = ckey;\n}\n\nObject.defineProperty(exports, 'codes', {\n  enumerable: true, value: Object.freeze(codes), writable: false\n});\n\nexports.Deflate = Deflate;\nexports.Inflate = Inflate;\nexports.Gzip = Gzip;\nexports.Gunzip = Gunzip;\nexports.DeflateRaw = DeflateRaw;\nexports.InflateRaw = InflateRaw;\nexports.Unzip = Unzip;\n\nexports.createDeflate = function (o) {\n  return new Deflate(o);\n};\n\nexports.createInflate = function (o) {\n  return new Inflate(o);\n};\n\nexports.createDeflateRaw = function (o) {\n  return new DeflateRaw(o);\n};\n\nexports.createInflateRaw = function (o) {\n  return new InflateRaw(o);\n};\n\nexports.createGzip = function (o) {\n  return new Gzip(o);\n};\n\nexports.createGunzip = function (o) {\n  return new Gunzip(o);\n};\n\nexports.createUnzip = function (o) {\n  return new Unzip(o);\n};\n\n// Convenience methods.\n// compress/decompress a string or buffer in one step.\nexports.deflate = function (buffer, opts, callback) {\n  if (typeof opts === 'function') {\n    callback = opts;\n    opts = {};\n  }\n  return zlibBuffer(new Deflate(opts), buffer, callback);\n};\n\nexports.deflateSync = function (buffer, opts) {\n  return zlibBufferSync(new Deflate(opts), buffer);\n};\n\nexports.gzip = function (buffer, opts, callback) {\n  if (typeof opts === 'function') {\n    callback = opts;\n    opts = {};\n  }\n  return zlibBuffer(new Gzip(opts), buffer, callback);\n};\n\nexports.gzipSync = function (buffer, opts) {\n  return zlibBufferSync(new Gzip(opts), buffer);\n};\n\nexports.deflateRaw = function (buffer, opts, callback) {\n  if (typeof opts === 'function') {\n    callback = opts;\n    opts = {};\n  }\n  return zlibBuffer(new DeflateRaw(opts), buffer, callback);\n};\n\nexports.deflateRawSync = function (buffer, opts) {\n  return zlibBufferSync(new DeflateRaw(opts), buffer);\n};\n\nexports.unzip = function (buffer, opts, callback) {\n  if (typeof opts === 'function') {\n    callback = opts;\n    opts = {};\n  }\n  return zlibBuffer(new Unzip(opts), buffer, callback);\n};\n\nexports.unzipSync = function (buffer, opts) {\n  return zlibBufferSync(new Unzip(opts), buffer);\n};\n\nexports.inflate = function (buffer, opts, callback) {\n  if (typeof opts === 'function') {\n    callback = opts;\n    opts = {};\n  }\n  return zlibBuffer(new Inflate(opts), buffer, callback);\n};\n\nexports.inflateSync = function (buffer, opts) {\n  return zlibBufferSync(new Inflate(opts), buffer);\n};\n\nexports.gunzip = function (buffer, opts, callback) {\n  if (typeof opts === 'function') {\n    callback = opts;\n    opts = {};\n  }\n  return zlibBuffer(new Gunzip(opts), buffer, callback);\n};\n\nexports.gunzipSync = function (buffer, opts) {\n  return zlibBufferSync(new Gunzip(opts), buffer);\n};\n\nexports.inflateRaw = function (buffer, opts, callback) {\n  if (typeof opts === 'function') {\n    callback = opts;\n    opts = {};\n  }\n  return zlibBuffer(new InflateRaw(opts), buffer, callback);\n};\n\nexports.inflateRawSync = function (buffer, opts) {\n  return zlibBufferSync(new InflateRaw(opts), buffer);\n};\n\nfunction zlibBuffer(engine, buffer, callback) {\n  var buffers = [];\n  var nread = 0;\n\n  engine.on('error', onError);\n  engine.on('end', onEnd);\n\n  engine.end(buffer);\n  flow();\n\n  function flow() {\n    var chunk;\n    while (null !== (chunk = engine.read())) {\n      buffers.push(chunk);\n      nread += chunk.length;\n    }\n    engine.once('readable', flow);\n  }\n\n  function onError(err) {\n    engine.removeListener('end', onEnd);\n    engine.removeListener('readable', flow);\n    callback(err);\n  }\n\n  function onEnd() {\n    var buf;\n    var err = null;\n\n    if (nread >= kMaxLength) {\n      err = new RangeError(kRangeErrorMessage);\n    } else {\n      buf = Buffer.concat(buffers, nread);\n    }\n\n    buffers = [];\n    engine.close();\n    callback(err, buf);\n  }\n}\n\nfunction zlibBufferSync(engine, buffer) {\n  if (typeof buffer === 'string') buffer = Buffer.from(buffer);\n\n  if (!Buffer.isBuffer(buffer)) throw new TypeError('Not a string or buffer');\n\n  var flushFlag = engine._finishFlushFlag;\n\n  return engine._processChunk(buffer, flushFlag);\n}\n\n// generic zlib\n// minimal 2-byte header\nfunction Deflate(opts) {\n  if (!(this instanceof Deflate)) return new Deflate(opts);\n  Zlib.call(this, opts, binding.DEFLATE);\n}\n\nfunction Inflate(opts) {\n  if (!(this instanceof Inflate)) return new Inflate(opts);\n  Zlib.call(this, opts, binding.INFLATE);\n}\n\n// gzip - bigger header, same deflate compression\nfunction Gzip(opts) {\n  if (!(this instanceof Gzip)) return new Gzip(opts);\n  Zlib.call(this, opts, binding.GZIP);\n}\n\nfunction Gunzip(opts) {\n  if (!(this instanceof Gunzip)) return new Gunzip(opts);\n  Zlib.call(this, opts, binding.GUNZIP);\n}\n\n// raw - no header\nfunction DeflateRaw(opts) {\n  if (!(this instanceof DeflateRaw)) return new DeflateRaw(opts);\n  Zlib.call(this, opts, binding.DEFLATERAW);\n}\n\nfunction InflateRaw(opts) {\n  if (!(this instanceof InflateRaw)) return new InflateRaw(opts);\n  Zlib.call(this, opts, binding.INFLATERAW);\n}\n\n// auto-detect header.\nfunction Unzip(opts) {\n  if (!(this instanceof Unzip)) return new Unzip(opts);\n  Zlib.call(this, opts, binding.UNZIP);\n}\n\nfunction isValidFlushFlag(flag) {\n  return flag === binding.Z_NO_FLUSH || flag === binding.Z_PARTIAL_FLUSH || flag === binding.Z_SYNC_FLUSH || flag === binding.Z_FULL_FLUSH || flag === binding.Z_FINISH || flag === binding.Z_BLOCK;\n}\n\n// the Zlib class they all inherit from\n// This thing manages the queue of requests, and returns\n// true or false if there is anything in the queue when\n// you call the .write() method.\n\nfunction Zlib(opts, mode) {\n  var _this = this;\n\n  this._opts = opts = opts || {};\n  this._chunkSize = opts.chunkSize || exports.Z_DEFAULT_CHUNK;\n\n  Transform.call(this, opts);\n\n  if (opts.flush && !isValidFlushFlag(opts.flush)) {\n    throw new Error('Invalid flush flag: ' + opts.flush);\n  }\n  if (opts.finishFlush && !isValidFlushFlag(opts.finishFlush)) {\n    throw new Error('Invalid flush flag: ' + opts.finishFlush);\n  }\n\n  this._flushFlag = opts.flush || binding.Z_NO_FLUSH;\n  this._finishFlushFlag = typeof opts.finishFlush !== 'undefined' ? opts.finishFlush : binding.Z_FINISH;\n\n  if (opts.chunkSize) {\n    if (opts.chunkSize < exports.Z_MIN_CHUNK || opts.chunkSize > exports.Z_MAX_CHUNK) {\n      throw new Error('Invalid chunk size: ' + opts.chunkSize);\n    }\n  }\n\n  if (opts.windowBits) {\n    if (opts.windowBits < exports.Z_MIN_WINDOWBITS || opts.windowBits > exports.Z_MAX_WINDOWBITS) {\n      throw new Error('Invalid windowBits: ' + opts.windowBits);\n    }\n  }\n\n  if (opts.level) {\n    if (opts.level < exports.Z_MIN_LEVEL || opts.level > exports.Z_MAX_LEVEL) {\n      throw new Error('Invalid compression level: ' + opts.level);\n    }\n  }\n\n  if (opts.memLevel) {\n    if (opts.memLevel < exports.Z_MIN_MEMLEVEL || opts.memLevel > exports.Z_MAX_MEMLEVEL) {\n      throw new Error('Invalid memLevel: ' + opts.memLevel);\n    }\n  }\n\n  if (opts.strategy) {\n    if (opts.strategy != exports.Z_FILTERED && opts.strategy != exports.Z_HUFFMAN_ONLY && opts.strategy != exports.Z_RLE && opts.strategy != exports.Z_FIXED && opts.strategy != exports.Z_DEFAULT_STRATEGY) {\n      throw new Error('Invalid strategy: ' + opts.strategy);\n    }\n  }\n\n  if (opts.dictionary) {\n    if (!Buffer.isBuffer(opts.dictionary)) {\n      throw new Error('Invalid dictionary: it should be a Buffer instance');\n    }\n  }\n\n  this._handle = new binding.Zlib(mode);\n\n  var self = this;\n  this._hadError = false;\n  this._handle.onerror = function (message, errno) {\n    // there is no way to cleanly recover.\n    // continuing only obscures problems.\n    _close(self);\n    self._hadError = true;\n\n    var error = new Error(message);\n    error.errno = errno;\n    error.code = exports.codes[errno];\n    self.emit('error', error);\n  };\n\n  var level = exports.Z_DEFAULT_COMPRESSION;\n  if (typeof opts.level === 'number') level = opts.level;\n\n  var strategy = exports.Z_DEFAULT_STRATEGY;\n  if (typeof opts.strategy === 'number') strategy = opts.strategy;\n\n  this._handle.init(opts.windowBits || exports.Z_DEFAULT_WINDOWBITS, level, opts.memLevel || exports.Z_DEFAULT_MEMLEVEL, strategy, opts.dictionary);\n\n  this._buffer = Buffer.allocUnsafe(this._chunkSize);\n  this._offset = 0;\n  this._level = level;\n  this._strategy = strategy;\n\n  this.once('end', this.close);\n\n  Object.defineProperty(this, '_closed', {\n    get: function () {\n      return !_this._handle;\n    },\n    configurable: true,\n    enumerable: true\n  });\n}\n\nutil.inherits(Zlib, Transform);\n\nZlib.prototype.params = function (level, strategy, callback) {\n  if (level < exports.Z_MIN_LEVEL || level > exports.Z_MAX_LEVEL) {\n    throw new RangeError('Invalid compression level: ' + level);\n  }\n  if (strategy != exports.Z_FILTERED && strategy != exports.Z_HUFFMAN_ONLY && strategy != exports.Z_RLE && strategy != exports.Z_FIXED && strategy != exports.Z_DEFAULT_STRATEGY) {\n    throw new TypeError('Invalid strategy: ' + strategy);\n  }\n\n  if (this._level !== level || this._strategy !== strategy) {\n    var self = this;\n    this.flush(binding.Z_SYNC_FLUSH, function () {\n      assert(self._handle, 'zlib binding closed');\n      self._handle.params(level, strategy);\n      if (!self._hadError) {\n        self._level = level;\n        self._strategy = strategy;\n        if (callback) callback();\n      }\n    });\n  } else {\n    process.nextTick(callback);\n  }\n};\n\nZlib.prototype.reset = function () {\n  assert(this._handle, 'zlib binding closed');\n  return this._handle.reset();\n};\n\n// This is the _flush function called by the transform class,\n// internally, when the last chunk has been written.\nZlib.prototype._flush = function (callback) {\n  this._transform(Buffer.alloc(0), '', callback);\n};\n\nZlib.prototype.flush = function (kind, callback) {\n  var _this2 = this;\n\n  var ws = this._writableState;\n\n  if (typeof kind === 'function' || kind === undefined && !callback) {\n    callback = kind;\n    kind = binding.Z_FULL_FLUSH;\n  }\n\n  if (ws.ended) {\n    if (callback) process.nextTick(callback);\n  } else if (ws.ending) {\n    if (callback) this.once('end', callback);\n  } else if (ws.needDrain) {\n    if (callback) {\n      this.once('drain', function () {\n        return _this2.flush(kind, callback);\n      });\n    }\n  } else {\n    this._flushFlag = kind;\n    this.write(Buffer.alloc(0), '', callback);\n  }\n};\n\nZlib.prototype.close = function (callback) {\n  _close(this, callback);\n  process.nextTick(emitCloseNT, this);\n};\n\nfunction _close(engine, callback) {\n  if (callback) process.nextTick(callback);\n\n  // Caller may invoke .close after a zlib error (which will null _handle).\n  if (!engine._handle) return;\n\n  engine._handle.close();\n  engine._handle = null;\n}\n\nfunction emitCloseNT(self) {\n  self.emit('close');\n}\n\nZlib.prototype._transform = function (chunk, encoding, cb) {\n  var flushFlag;\n  var ws = this._writableState;\n  var ending = ws.ending || ws.ended;\n  var last = ending && (!chunk || ws.length === chunk.length);\n\n  if (chunk !== null && !Buffer.isBuffer(chunk)) return cb(new Error('invalid input'));\n\n  if (!this._handle) return cb(new Error('zlib binding closed'));\n\n  // If it's the last chunk, or a final flush, we use the Z_FINISH flush flag\n  // (or whatever flag was provided using opts.finishFlush).\n  // If it's explicitly flushing at some other time, then we use\n  // Z_FULL_FLUSH. Otherwise, use Z_NO_FLUSH for maximum compression\n  // goodness.\n  if (last) flushFlag = this._finishFlushFlag;else {\n    flushFlag = this._flushFlag;\n    // once we've flushed the last of the queue, stop flushing and\n    // go back to the normal behavior.\n    if (chunk.length >= ws.length) {\n      this._flushFlag = this._opts.flush || binding.Z_NO_FLUSH;\n    }\n  }\n\n  this._processChunk(chunk, flushFlag, cb);\n};\n\nZlib.prototype._processChunk = function (chunk, flushFlag, cb) {\n  var availInBefore = chunk && chunk.length;\n  var availOutBefore = this._chunkSize - this._offset;\n  var inOff = 0;\n\n  var self = this;\n\n  var async = typeof cb === 'function';\n\n  if (!async) {\n    var buffers = [];\n    var nread = 0;\n\n    var error;\n    this.on('error', function (er) {\n      error = er;\n    });\n\n    assert(this._handle, 'zlib binding closed');\n    do {\n      var res = this._handle.writeSync(flushFlag, chunk, // in\n      inOff, // in_off\n      availInBefore, // in_len\n      this._buffer, // out\n      this._offset, //out_off\n      availOutBefore); // out_len\n    } while (!this._hadError && callback(res[0], res[1]));\n\n    if (this._hadError) {\n      throw error;\n    }\n\n    if (nread >= kMaxLength) {\n      _close(this);\n      throw new RangeError(kRangeErrorMessage);\n    }\n\n    var buf = Buffer.concat(buffers, nread);\n    _close(this);\n\n    return buf;\n  }\n\n  assert(this._handle, 'zlib binding closed');\n  var req = this._handle.write(flushFlag, chunk, // in\n  inOff, // in_off\n  availInBefore, // in_len\n  this._buffer, // out\n  this._offset, //out_off\n  availOutBefore); // out_len\n\n  req.buffer = chunk;\n  req.callback = callback;\n\n  function callback(availInAfter, availOutAfter) {\n    // When the callback is used in an async write, the callback's\n    // context is the `req` object that was created. The req object\n    // is === this._handle, and that's why it's important to null\n    // out the values after they are done being used. `this._handle`\n    // can stay in memory longer than the callback and buffer are needed.\n    if (this) {\n      this.buffer = null;\n      this.callback = null;\n    }\n\n    if (self._hadError) return;\n\n    var have = availOutBefore - availOutAfter;\n    assert(have >= 0, 'have should not go down');\n\n    if (have > 0) {\n      var out = self._buffer.slice(self._offset, self._offset + have);\n      self._offset += have;\n      // serve some output to the consumer.\n      if (async) {\n        self.push(out);\n      } else {\n        buffers.push(out);\n        nread += out.length;\n      }\n    }\n\n    // exhausted the output buffer, or used all the input create a new one.\n    if (availOutAfter === 0 || self._offset >= self._chunkSize) {\n      availOutBefore = self._chunkSize;\n      self._offset = 0;\n      self._buffer = Buffer.allocUnsafe(self._chunkSize);\n    }\n\n    if (availOutAfter === 0) {\n      // Not actually done.  Need to reprocess.\n      // Also, update the availInBefore to the availInAfter value,\n      // so that if we have to hit it a third (fourth, etc.) time,\n      // it'll have the correct byte counts.\n      inOff += availInBefore - availInAfter;\n      availInBefore = availInAfter;\n\n      if (!async) return true;\n\n      var newReq = self._handle.write(flushFlag, chunk, inOff, availInBefore, self._buffer, self._offset, self._chunkSize);\n      newReq.callback = callback; // this same function\n      newReq.buffer = chunk;\n      return;\n    }\n\n    if (!async) return false;\n\n    // finished with the chunk.\n    cb();\n  }\n};\n\nutil.inherits(Deflate, Zlib);\nutil.inherits(Inflate, Zlib);\nutil.inherits(Gzip, Zlib);\nutil.inherits(Gunzip, Zlib);\nutil.inherits(DeflateRaw, Zlib);\nutil.inherits(InflateRaw, Zlib);\nutil.inherits(Unzip, Zlib);"]},"metadata":{},"sourceType":"script"}